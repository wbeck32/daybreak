<!DOCTYPE html>
<html lang="en" data-ng-app="dayBreak">
<head>
	<meta charset="utf-8" />
    <meta property="og:type" content="website">
	<meta property="og:title" content="Daybreak is the pefect way to share your Perfect Day.">
    <meta property="og:description" content="Use Daybreak discover other people's favorite days and favorite places, and share your perfect day.">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/styles.css" />
	<script src="js/modernizr.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Fira+Sans:400,500' rel='stylesheet' type='text/css'>
	<title>Daybreak - Share and Find the Perfect Day</title>
	<style>#map-canvas{width:100%;height:100%;border:1px solid red;}</style>
</head>

<body>

<div data-ng-controller= "userController as User"
		data-ng-controller="validateCtrl">    
 
<!-- TODO: <user-directive> </user-directive>  -->
 
	<nav class = 'navbar navbar-default'>

		<div id = "titleGraphic">
			Daybreak
		</div>

	  	<div class="container">
			<ul class='nav navbar-nav'>

				<li><a><div 
						data-ng-click="userViewSwitch ='None' ">
						Home
						</div></a></li>

				<li><a  data-ng-show ="User.userState==='loggedIn'"
			 			data-ng-click="User.signOut();userViewSwitch='None' " > 
		 		  		Logout
		 		  		</a></li>

				<li><a 	data-ng-model="userViewSwitch"
				  		data-ng-show="User.userState==='loggedOut'"
				  		data-ng-click="userViewSwitch='Log' ">
				  		Login
				  		</a></li>	

				<li><a	data-ng-show="User.userState==='loggedOut'"
			  	  		data-ng-click="userViewSwitch ='Reg' "> 
			  	  		Register 
			  	  		</a></li>

				<li><a><div 	
			   	  		data-ng-model="User"  
			  	  		data-ng-show="User.userState==='loggedIn'" >
			  			Welcome: {{User.username}}
 
				  		</div></a></li>

				<li><a  data-ng-show="User.userState==='loggedIn'"
			  	  		data-ng-click="userViewSwitch ='Myaccount' " >
			  			My Account
				  		</a></li>
		   	</ul>
	  	</div>
	</nav>




	<div class = 'surround'>	
		<div class = 'userContainer' 
				data-ng-show=" 
					(User.userState ==='loggedOut' && 
					(userViewSwitch === 'Log'      || 
					 userViewSwitch === 'Reg'      || 
					 userViewSwitch === 'Reset' ) )|| 
				 	(User.userState ==='loggedIn'  &&
					 userViewSwitch ==='Myaccount')">



			<div id='login' ng-switch on="userViewSwitch">
				<div ng-switch-when='Log' >
					<form data-ng-submit="User.login() "
						  >
						
						<div class="form group">
							<label>Username</label>
							<input class= "form-control" type="text" 
							ng-model="User.username">
						</div>

						<div class="form group">
							<label>Password</label>
							<input class= "form-control" type="password" ng-model="User.password">
						</div>
						<p></p>
						<input class="btn btn-success btn-sm btn-block" type="submit" value="Login">
					</form>
					<p></p>
				</div>

				<!-- Must be outside of ng-switch-when! -->
				<div class='closeModal' 
					 data-ng-show="userViewSwitch==='Log' ">
 					<a 
	 					data-ng-click="userViewSwitch='Reset' ">
						Reset Password
					</a>
				</div>
			</div>
			


		   	<div id='register'
		   			ng-switch on='userViewSwitch'

 		   			>
		   		<div ng-switch-when='Reg' >
					<form 
						data-ng-submit="User.registerValidUser()"
 						name = "regForm" 
						novalidate>

						<div class="form group">
							<label>Username</label>
							<input class= "form-control" 
							type="text"

							data-ng-blur="User.checkthename()" 
 							data-ng-model="User.username"

 							placeholder="5 character minimum. Public."
 							required>					
						</div>
 
							<div class="errMsg" 
							data-ng-if="!User.uniqueUserName">
							User name already in use.</div>

							<div class = "otherErrorMsg"
							data-ng-if="User.username.length < User.usernameLength">
							Must be 5 characters or longer.
							</div>

						<p></p>

						<div class="form group">
							<label>E-Mail</label>
							<input class= "form-control"
							id="emailConfirm" 
							type="text"
							data-ng-blur="User.checktheemail()" 
							data-ng-model="User.email"
							placeholder="Required for password recovery.  Private."
							required>
						</div>

						<div class="errMsg" 
						data-ng-if="(User.uniqueEmail === false)">
						E-mail already in use.  Recover password now?</div>


             			<p></p>

						<div class="form group">
							<label>Password</label>
							<input class= "form-control"
							id='passwordFirst' 
							type="password" 
							name='password'
							data-ng-model="User.password"
							placeholder="Enter password. Secret."
							required>
						</div>

						<div class="form group">
							<label>Password Confirmation</label>
							<input class= "form-control"
							id='passwordConfirm' 
							name='passwordConfirm'
							type="password" 
							data-ng-model="User.passwordConfirm"
							placeholder="Reenter password."
							required>
						</div>


						<div class="errMsg" 
             			data-ng-if="User.password !== User.passwordConfirm 
             			&& regForm.passwordConfirm.$touched">
             			Password confirmation does not match.</div>

             			<!-- 
						<div >
							<p>username is: 		{{User.username}}</p>
							<p>email is   : 		{{User.email}}</p>
							<p>password is: 		{{User.password}}</p>
							<p>uniqueUserName is: 	{{User.uniqueUserName}}</p>
							<p>uniqueEmail is:		{{User.uniqueEmail}}</p>
							<p> regForm.$invalid 	{{regForm.$invalid}} </p>
						</div> -->

						 

						<input 
						
						data-ng-disabled="
						regForm.$invalid  	  && 
						regForm.$dirty        ||
						!User.uniqueUserName  ||
						!User.uniqueEmail	  ||
						(User.password != User.passwordConfirm)"

 
						class="btn btn-success btn-sm btn-block" 
						type="submit" 
						value="Register Now">
 	

					</form>
				</div>
		 	</div>
		 
			<div id='resetPassword' 
				data-ng-switch on='userViewSwitch'
				data-ng-submit="User.resetPassword()"
				>

				<div data-ng-switch-when='Reset'>
					<form 
					data-ng-submit="User.resetPassword()">	
						<div class="form group">
							<label>Forgot Password? Enter E-Mail</label>
							<input class= "form-control" 
							type="text" 
							data-ng-model="User.email">
						</div>
						<input 
						class="btn btn-success btn-sm btn-block" 
						type="submit" 
						value="Send Password Reset Link">
						</input>
					</form>
					<p></p>
				</div>
		 	</div>



	   		<div id='about' ng-switch on="userViewSwitch">
				<div ng-switch-when='Myaccount' >
		 	 		<p>About Your Account</p>

		 	 		<div class ="userProfile">
						<div 
							data-ng-model="User" 
							data-ng-show="User.userState==='loggedIn'" 
							data-ng-if="userViewSwitch==='Myaccount' " >

				  			<div class="userProfile">
				  			<li>Name: 		{{User.username}}</li>
				  			<li>Email: 		{{User.email}}</li>
				  			<li>Joined: 	{{User.createDate}}</li>
				  			<li>About You: 	{{User.userAbout}}</li>
				  			
				  			</div>
				  			<p> </p>
 						</div>
					</div>
			  	</div>  

 
 				<div class='closeModal' 
					data-ng-show="userViewSwitch==='Myaccount' ">
 					<a 
	 					data-ng-click="userViewSwitch='None' ">
						Close Account Profile
					</a>
				</div>
			</div>   
		</div>   
	</div>	 
</div> <!-- close userController -->



<div class="container">
<h1>My Day</h1>
<p>Share your adventure</p>

<section>
<div data-ng-controller="dayController as Day">
	<form data-ng-submit="Day.addDay()">
	<input type="hidden" data-ng-model="Day.userName" value="joey">
	<input type="text" data-ng-model="Day.dayName" placeholder="Give your day a name">
	
	<select data-ng-model="Day.dayGroup">
		<option value="single" selected>Single</option>
		<option value="couple">Couple</option>
		<option value="fsk">Family with small kids</option>
		<option value="fwtweens">Family with tweens</option>
		<option value="fwteens">Family with teenagers</option>
		<option value="adults">Group of adults</option>
	</select>

<input type="text" data-ng-model="Day.dayDesc" class="desc" placeholder="Describe your day">
</div>

<!-- LOCATION -->
<div data-ng-controller="locationController as Location" style="border:1px solid red;">

<input type="text" data-ng-model="message" placeholder="Msg"/>
<add-location></add-location>

<h1>Find a location</h1>

<input type="text" width="200" id="pac-input" placeholder="Enter the name of location" data-ng-model="Location.locName">
<div>
	<a data-ng-href="{{locURL}}" target="_blank">{{locName}}</a>
</div>

<input type="text" data-ng-model="Location.locationDesc" class="desc controls" placeholder="Describe this location">

<!--TODO: Add functionality for uploading photos -->
<div>Share a picture from your Day - <input type="file" accept="image/*"></div>
<!--TODO-->

<div data-ng-click="Location.addLoc(Location)">Add this location.</div>



</div>
<!-- END LOCATION BOX -->

<div data-ng-controller="tagController as Tag">
<div>Use commas between tags.</div>
<input type="text" id="tags" data-ng-change="Tag.enterTag()" placeholder="Enter some tags" data-ng-model="Tag.dayTags">
</div>
<input type="submit">Add this day</submit>
</div>
</form>
</section>


<div data-ng-controller="dayController" class="container">
<h3>Great Days Shared by Our Community</h3>
<h5>Here's a list of great Days!</h5>
  
<ul class='list-group'>
	<li data-ng-repeat="day in days" class='list-group-item'> 
 		Title: 			{{ 	day.dayName }}<br>
		User: 			{{ 	day.userName }}<br>
		Day Date: 		{{ 	day.dayDate}}<br>
 		Reporting Date: {{ 	day.dayCreateDate  }}<br>
 		Updated on: 	{{	day.dayUpdateDate  }}<br>
		Description: 	{{	day.dayDesc}}<br>
		Who was there: 	{{	day.dayGroup}}<br>
		Tags: 			{{	day.dayTags}}<br>
		Locations: 		{{	day.locations}}<br>

	</li>
</ul>

</div>




<aside>
	<div id="map-canvas">map</div>
</aside>

 


<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-route.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
<script src="js/main.js"></script>
</body>

</html>