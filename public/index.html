<!DOCTYPE html>
<html lang="en" data-ng-app="dayBreak">
<head>
	<meta charset="utf-8" />
    <meta property="og:type" content="website">
	<meta property="og:title" content="Daybreak is the pefect way to share your Perfect Day.">
    <meta property="og:description" content="Use Daybreak discover other people's favorite days and favorite places, and share your perfect day.">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/styles.css" />
	<script src="js/modernizr.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Fira+Sans:400,500' rel='stylesheet' type='text/css'>
	<title>Daybreak - Share and Find the Perfect Day</title>
	
</head>

<body>

<div data-ng-controller= "userController as User">    
	<nav class = 'navbar navbar-default'>
		<div id = "titleGraphic">Daybreak</div>
 	  	<div class="container" >
 	  		
			<ul class='nav navbar-nav'>

				<li><a><div 
						data-ng-click="User.userViewSwitch = null ">
						Home  
						</div>
				</a></li>

				<li><a data-ng-show="User.userState==='loggedIn'" data-ng-click="User.signOut()" > 
		 		  		Logout
		 		</a></li>

				<li><a data-ng-show="User.userState==='loggedOut'" data-ng-click="User.userViewSwitch='Log';User.LoginError = false ">
				  		Login
				</a></li>	

			  	 <li><a	data-ng-show="User.userState==='loggedOut'"
			  	  		data-ng-click="User.userViewSwitch ='NEWREG'"> 
			  	  		Register 
			  	</a></li>

				<li><a><div 	
			   	  		data-ng-model="User"  
			  	  		data-ng-show="User.userState==='loggedIn'" >
			  			Welcome: {{User.username}}
				  		</div>
				 </a></li>

				<li><a data-ng-show="User.userState==='loggedIn'" data-ng-click="User.userViewSwitch ='Myaccount'">
			  			My Account
				</a></li>
		   	</ul>
	  	</div>
	</nav>

	<div class = 'surround'>	
		<div class = 'userContainer'
			data-ng-show= "User.userViewSwitch === 'Log' " >
			<div id='login' ng-switch on="User.userViewSwitch">
				<div ng-switch-when='Log' >
					<div class='loginDirection'>
						Login with your Facebook account.

					</div>
				</div>
			</div>
		</div>

		<div class= 'spacer'> </div>

		<div class = 'userContainer' 
		data-ng-show= "User.userViewSwitch !== null " >

			<div id='login' ng-switch on="User.userViewSwitch">
				<div ng-switch-when='Log' >

					<div class='loginDirection'>
						Login with your user name and password.
					</div>

					<form data-ng-submit="User.login()"
						  >

						<div class="form group">
							<label class="label-space">User Name</label>
							<input class= "form-control" type="text" ng-model="User.username">
						</div>

						<div class="form group">
							<label class="label-space">Password</label>

							<span class="alert alert-warning fade in" data-ng-show="User.LoginError === true">
							Unknown user name or password.</span>

							<input class= "form-control" type="password" ng-model="User.password">

						</div>
						
						
						<div class='spacer'></div>

						<input class="btn btn-success btn-sm btn-block" type="submit" value="Login"	>

					</form>
				</div>

				<!-- Must be outside of ng-switch-when! -->
				<div class='closeModal' data-ng-show="User.userViewSwitch==='Log' ">
 					<a data-ng-click="User.userViewSwitch='Reset'">Reset Password</a>
				</div>
			</div>

			
		<div id='NEWREGISTER'
		   			data-ng-switch on='User.userViewSwitch'
 		   			>
		   		<div data-ng-switch-when="NEWREG">
					<form 
						data-ng-submit="User.registerValidUser(User)"
 						name = "regForm" 
						novalidate>

						<div class='loginDirection'>
							Register 

							<span class="link" data-ng-click="User.userViewSwitch = 'Log'">(or Login with Facebook)</span>
  						</div>
						
						<div class="form group">
							<label class="label-space">Username</label>

								<span class="alert alert-info" data-ng-show="User.username.length < 6">
								You need {{6-User.username.length}} more characters.
								</span>

								<span class="alert alert-info" data-ng-show="User.uniqueUserName===false">
								User name already in use. <span class="link" data-ng-click="User.userViewSwitch = 'Log'">Login?</span>
								</span>

								<span class="alert alert-success" data-ng-show="User.uniqueUserName===true && User.username.length > 5">
								You are the only one!  
								</span>

							<input class= "form-control" 
							type="text"
 							data-ng-model="User.username"
  							data-ng-change="User.checkthename(User.username)" 

 							placeholder="Six character minimum. Public."
 							required>				
						</div>   
  
						<div class="form group">
							<label class="label-space">E-Mail</label>

							<span class="alert alert-info" 
							ng-show="regForm.email.$error.email">
    						Please enter a valid email.</span>

							<span class="alert alert-success" 
							ng-show="!regForm.email.$error.email && 
							User.uniqueEmail === true ">
    						Looks possible!</span>

     						<span class="alert alert-info" 
    						data-ng-show="regForm.email.$valid && 
    						User.uniqueEmail === false  ">
 							E-mail exists. <span class="link" data-ng-click="User.userViewSwitch = 'Log'">Login?</span>
  							</span>

							<input class= "form-control"
							id="emailConfirm" 
							type="email"
							name="email"
							data-ng-model="User.email"	
							data-ng-change="User.checktheemail(User.email)" 

							placeholder="Required for password recovery.  Private."
							required>
 
						</div>

						<div class="form group">
							<label class="label-space">Password</label>

							<span class='alert alert-info' data-ng-model="User.password" data-ng-show ="User.password.length < 5">
							You need {{5-User.password.length}} more characters.
  							</span>

							<span class='alert alert-success' data-ng-model="User.password" data-ng-show ="User.password.length > 4">
							Good! Or add more for extra security.
  							</span>

							<input class= "form-control"
							id='passwordFirst' 
							type="password" 
							name='password'
							data-ng-model="User.password"

 							data-ng-keyup="User.passconfirm(User.password, User.passwordConfirm)"
 
 							placeholder="Enter secret password. Must be 5 characters. "
							required>
						</div>

						<div class="form group">
							<label class="label-space">Password Confirm</label>

							<span class='alert alert-info' data-ng-model="User.password" data-ng-show ="User.matchingPassword === false">
 							Passwords must match.
  							</span>				

  							<span class='alert alert-success' data-ng-model="User.password" data-ng-show ="User.matchingPassword === true">
 							You matched it!
  							</span>			

							<input class= "form-control"
							id='passwordConfirm' 
							name='passwordConfirm'
							type="password" 
							data-ng-model="User.passwordConfirm"
 							
 							data-ng-keyup="User.passconfirm(User.password, User.passwordConfirm)"

							placeholder="Reenter password."
							required>
						</div>	
		
 						<div class='spacer' ></div>

						<input  
 						data-ng-hide=
						"User.newRegValuesAllGood(User) === false ||
						regForm.email.$error.email " 
						class="btn btn-success btn-sm btn-block" 
						type="submit" 
						value="Register Now!">

					</form>
				</div>
		 	</div>
		 
			<div id='resetPassword' 
				data-ng-switch on='User.userViewSwitch'
				data-ng-submit="User.resetPassword()"
				>

				<div data-ng-switch-when='Reset'>
					<form 
					data-ng-submit="User.resetPassword()">	
						<div class="form group">
							<label>Forgot Password? Enter E-Mail</label>
							<input class= "form-control" 
							type="text" 
							data-ng-model="User.email">
						</div>

						<div class='spacer'></div>

						<input 
						class="btn btn-success btn-sm btn-block" 
						type="submit" 
						value="Send Password Reset Link">
						</input>
					</form>
					<p></p>
				</div>
		 	</div>
 

	   		<div id='about' ng-switch on="User.userViewSwitch">
				<div ng-switch-when='Myaccount' >
		 	 		<div class='loginDirection'>About Your Account</div>
			 	 		<div class ="userProfile">
							<div data-ng-show="User.userState==='loggedIn' ">
					  			<div class="userProfile"  >
						  			<li>Name (public):{{User.username}}</li>
						  			<li>About You (public):{{User.userAbout}}</li>
									<li>Email (private):{{User.email}}</li>
						  			<li>Member since:{{User.created}}</li>
					  			</div>
	  						</div>
						</div>
			  		</div>  
  				<div class='closeModal' 
					data-ng-show="User.userViewSwitch==='Myaccount' ">
 					<a data-ng-click="User.userViewSwitch=null ">
						Close this pop-up.
					</a>
				</div>
			</div>
		</div>
	</div>
</div>	<!-- extra div required not sure why -->
</div> <!-- close userController -->

<div class='spacer'></div>

<div class="container-fluid">

<div class="col-md-6" style="border:2px solid blue;">
<h1>My Day</h1>
<p>Share your adventure</p>

<section>
<div class="form-group" data-ng-controller="dayController as Day">
	<form data-ng-submit="Day.addDay()">
	<input type="hidden" data-ng-model="Day.username" value="joey">
	<input type="text" class="form-control" data-ng-model="Day.dayName" placeholder="Give your day a name">
	
	<select class="form-control" data-ng-model="Day.dayGroup" placeholder="Who is in your group?">
		<option value="single" selected="selected">Single</option>
		<option value="couple">Couple</option>
		<option value="fsk">Family with small kids</option>
		<option value="fwtweens">Family with tweens</option>
		<option value="fwteens">Family with teenagers</option>
		<option value="adults">Group of adults</option>
	</select>
	<textarea class="form-control desc" rows="5" data-ng-model="Day.dayDesc" placeholder="Describe your day"></textarea> 

<!-- LOCATION -->
<div data-ng-controller="locationController as Location" class="form-group" style="margin:10px 0;">
	<h4>Find a location</h4>
	<input type="text" class="form-control" id="pac-input" placeholder="Enter the name of location" data-ng-model="Location.locName">
	<textarea class="form-control" data-ng-bind="locDesc" rows="3" data-ng-model="Location.locDesc" placeholder="Describe this location"></textarea>
<!--TODO: Add functionality for uploading photos -->
<!-- <div>Share a picture from your Day - <input type="file" accept="image/*"></div> -->
<!--TODO-->
	<div class="btn btn-default" data-ng-click="Location.addLoc(Location,locName,locURL,locDesc)">Add this location</div>
<!-- END LOCATION BOX -->
</div> <!-- END LOCATION CONTROLLER -->

<div data-ng-controller="tagController as Tag" class="form-group">
	<div>Use commas between tags.</div>
		<input type="text" id="tags" class="form-control" data-ng-change="Tag.enterTag()" placeholder="Enter some tags" data-ng-model="Tag.dayTags">
</div> <!--END TAG CONTROLLER -->
	<button class="btn btn-default" type="submit">Add this day</button>
</form>
</div> <!-- END DAY CONTROLLER -->
</section>
</div>
	<aside class="pull-right col-md-5" style="border:2px solid red;">
		<h3>Location list</h3>
		<location-list></location-list>
		<div id="map-canvas"></div>		
	</aside>
</div>



<div data-ng-controller="dayController" class="container">
<h3>Great Days Shared by Our Community</h3>
<h5>Here's a list of great Days!</h5>
  
<ul class='list-group'>
	<li data-ng-repeat="day in days" class='list-group-item'> 
 		Title: 			{{ 	day.dayName }}<br>
		User: 			{{ 	day.userName }}<br>
		Day Date: 		{{ 	day.dayDate}}<br>
 		Reporting Date: {{ 	day.dayCreateDate  }}<br>
 		Updated on: 	{{	day.dayUpdateDate  }}<br>
		Description: 	{{	day.dayDesc}}<br>
		Who was there: 	{{	day.dayGroup}}<br>
		Tags: 			{{	day.dayTags}}<br>
		Locations: 		{{	day.locations}}<br>

	</li>
</ul>

</div>

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-route.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
<script src="js/main.js"></script>
</body>

</html>